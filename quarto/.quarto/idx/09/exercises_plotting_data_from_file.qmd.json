{"title":"Plotting data from file","markdown":{"yaml":{"title":"Plotting data from file","jupyter":"python3"},"headingText":"Extract time and concentration of A from our array","containsRefs":false,"markdown":"\n\n\n\nHow can we use what we have learnt in the past few workshops to read data from a file? And how can we plot this?\n\nOne way to then plot this data would be to extract the index and/or multiple columns we are interested in plotting and use `matplotlib` as we have done before.\n\nAs an example, we'll look at a new data file. This contains a simulation of the (fractional) concentration change for two species in a reaction, \"A\" and \"B\" where $A \\rightarrow B$.\n\n```{python}\ndata_filename = \"data/FIRST ORDER_k=0.0005.txt\"\n```\n\nIf we open this file more directly in Python when we looked at a text file) we can take quick look at the contents to see what this looks like:\n\n```{python}\nopen_file = open(data_filename)\ndata_from_file = open_file.read()\nprint(data_from_file[0:200])\n```\n\nFrom printing out the first 200 characters, we can see this looks like a table of data with each column separated by spaces. This looks nicely formatted with a title row including the column names and no extra header rows.\n\nWe will see in the next year that there are dedicate packages to manipulate large tabulated files. However, for now we can exploit `numpy` as a quick and effective way to read such input.\n\n```{python}\nimport numpy as np\n\ndata_kinetic_k0005 = np.genfromtxt(\"data/FIRST ORDER_k=0.0005.txt\", names=True)\n```\n\nThis is a special kind of array called a **structured** array, because it has **named fields**. You can check this by querying the subproperties of the array:\n\n```{python}\ndata_kinetic_k0005.dtype.names\n```\n\nThese various **names are the fields** of the array, corresponding to the columns in the file. This syntax is reminiscent of what we have seen in the case of **dictionaries**, where **keys** are used to specific other objects stored in the dictionary.\n\n```{python}\ndata_kinetic_k0005['A']\n```\n\nThis data also has a column for \"Time\" as the number of seconds elapsed.\n\n```{python}\ndata_kinetic_k0005 ['Time']\n```\n\nTo create a plot for **time** vs **concentration of A**, we can extract this data from our array\n\n```{python}\ntime = data_kinetic_k0005['Time']\nconcentration_A = data_kinetic_k0005[\"A\"]\n```\n\nWe could then use matplotlib to plot this:\n\n```{python}\nimport matplotlib.pyplot as plt\n\n# Create our Figure and Axes objects for plotting\nfig, ax = plt.subplots()\n\n# Plot our data - time vs concentration of A\nax.plot(time, concentration_A)\n\n# Add x and y labels for this data\nax.set_xlabel(\"Time (s)\")\nax.set_ylabel(\"Concentration\")\n```\n\nThis simulation shows a clean relationship as concentration decreases over time (in an exponential way).\n\nSuppose we want to filter our data and plot only concentrations less than 0.5. We can simply create a **boolean** array that masks the invalid data.\n\n```{python}\nmask = concentration_A <= 0.5\nconcentration_A_low = concentration_A[mask]\n# Make sure to match the time values (index) to our filtered data\ntime_low = time[mask]\n```\n\nHere we have filtered our data to include all fractional concentrations less than (or equal to) 0.5. Notice we have also matched our time values to plot to these concentrations by extracting the index from our new array `concentration_A_low`.\n\n```{python}\n# Create our Figure and Axes objects for plotting\nfig, ax = plt.subplots()\n\n# Plot our data - time vs concentration of A\nax.plot(time_low, concentration_A_low)\n\n# Note: Alternative syntax! we can set multiple properties at once\nax.set(xlabel = \"Time (s)\",  ylabel=\"Concentration\")\n```\n\nYou can also see the slope is similiar (in fact it is the same) between our unfiltered and filtered data (this is due to the exponential relationship).\n\n---\n\n### Exercise \n\n 1. Re-plot the un-filtered graph created above and add another line to show **concentration of B** vs **time**  from the `data_kinetic_k0005` array on the same plot. \n  - Can you include a label for A and B?\n\n\n2. Calculate the the sum of the concentrations for these two columns (A and B).\n\n\n3. Re-plot the graph created in the previous question and add this sum as a third line.\n\n - Consider: What does this sum tell us about \"A\" is decaying into \"B\"?\n\n\n\n\n","srcMarkdownNoYaml":"\n\n\n\nHow can we use what we have learnt in the past few workshops to read data from a file? And how can we plot this?\n\nOne way to then plot this data would be to extract the index and/or multiple columns we are interested in plotting and use `matplotlib` as we have done before.\n\nAs an example, we'll look at a new data file. This contains a simulation of the (fractional) concentration change for two species in a reaction, \"A\" and \"B\" where $A \\rightarrow B$.\n\n```{python}\ndata_filename = \"data/FIRST ORDER_k=0.0005.txt\"\n```\n\nIf we open this file more directly in Python when we looked at a text file) we can take quick look at the contents to see what this looks like:\n\n```{python}\nopen_file = open(data_filename)\ndata_from_file = open_file.read()\nprint(data_from_file[0:200])\n```\n\nFrom printing out the first 200 characters, we can see this looks like a table of data with each column separated by spaces. This looks nicely formatted with a title row including the column names and no extra header rows.\n\nWe will see in the next year that there are dedicate packages to manipulate large tabulated files. However, for now we can exploit `numpy` as a quick and effective way to read such input.\n\n```{python}\nimport numpy as np\n\ndata_kinetic_k0005 = np.genfromtxt(\"data/FIRST ORDER_k=0.0005.txt\", names=True)\n```\n\nThis is a special kind of array called a **structured** array, because it has **named fields**. You can check this by querying the subproperties of the array:\n\n```{python}\ndata_kinetic_k0005.dtype.names\n```\n\nThese various **names are the fields** of the array, corresponding to the columns in the file. This syntax is reminiscent of what we have seen in the case of **dictionaries**, where **keys** are used to specific other objects stored in the dictionary.\n\n```{python}\ndata_kinetic_k0005['A']\n```\n\nThis data also has a column for \"Time\" as the number of seconds elapsed.\n\n```{python}\ndata_kinetic_k0005 ['Time']\n```\n\nTo create a plot for **time** vs **concentration of A**, we can extract this data from our array\n\n```{python}\n# Extract time and concentration of A from our array\ntime = data_kinetic_k0005['Time']\nconcentration_A = data_kinetic_k0005[\"A\"]\n```\n\nWe could then use matplotlib to plot this:\n\n```{python}\nimport matplotlib.pyplot as plt\n\n# Create our Figure and Axes objects for plotting\nfig, ax = plt.subplots()\n\n# Plot our data - time vs concentration of A\nax.plot(time, concentration_A)\n\n# Add x and y labels for this data\nax.set_xlabel(\"Time (s)\")\nax.set_ylabel(\"Concentration\")\n```\n\nThis simulation shows a clean relationship as concentration decreases over time (in an exponential way).\n\nSuppose we want to filter our data and plot only concentrations less than 0.5. We can simply create a **boolean** array that masks the invalid data.\n\n```{python}\nmask = concentration_A <= 0.5\nconcentration_A_low = concentration_A[mask]\n# Make sure to match the time values (index) to our filtered data\ntime_low = time[mask]\n```\n\nHere we have filtered our data to include all fractional concentrations less than (or equal to) 0.5. Notice we have also matched our time values to plot to these concentrations by extracting the index from our new array `concentration_A_low`.\n\n```{python}\n# Create our Figure and Axes objects for plotting\nfig, ax = plt.subplots()\n\n# Plot our data - time vs concentration of A\nax.plot(time_low, concentration_A_low)\n\n# Note: Alternative syntax! we can set multiple properties at once\nax.set(xlabel = \"Time (s)\",  ylabel=\"Concentration\")\n```\n\nYou can also see the slope is similiar (in fact it is the same) between our unfiltered and filtered data (this is due to the exponential relationship).\n\n---\n\n### Exercise \n\n 1. Re-plot the un-filtered graph created above and add another line to show **concentration of B** vs **time**  from the `data_kinetic_k0005` array on the same plot. \n  - Can you include a label for A and B?\n\n\n2. Calculate the the sum of the concentrations for these two columns (A and B).\n\n\n3. Re-plot the graph created in the previous question and add this sum as a third line.\n\n - Consider: What does this sum tell us about \"A\" is decaying into \"B\"?\n\n\n\n\n"},"formats":{"live-html":{"identifier":{"display-name":"HTML","target-format":"live-html","base-format":"html","extension-name":"live"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":true,"eval":true,"cache":true,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":false,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":true,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":true,"self-contained-math":false,"format-resources":[],"notebook-links":true,"shortcodes":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","filters":["/Users/ft14968/Repos/intro-coding-data-analysis/quarto/_extensions/r-wasm/live/live.lua"],"include-in-header":{"text":"<meta name=\"robots\" content=\"noindex, nofollow\">\n"},"css":["../styles.css"],"toc":true,"toc-depth":3,"highlight-style":"github","number-sections":false,"output-file":"exercises_plotting_data_from_file.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.7.31","ojs-engine":true,"revealjs-plugins":[],"theme":"cosmo","toc-location":"right","code-copy":true,"grid":{"sidebar-width":"350px"},"title":"Plotting data from file","jupyter":"python3"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["live-html"]}